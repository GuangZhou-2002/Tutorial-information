<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        /* JSON */
        /* 1、JSON是什么? 是一种用来表示和传输数据的格式，独立于语言且支持几乎所有的主流编程语言。 */
        /* PHP  */
        /* JavaScript  */
        /* Object-C */
        /* swift */
        /* java */
        /* 全称：JavaScript Object Notion   因为JSON的作者:道格拉斯本身就是一个JavaScript专家，在发明JSON
           的时候，借鉴了JavaScript的对象字面量写法。
        */

        /* JavaScript的对象：对象字面量 */
        let book = {
            author: "余华",
            price: "23.90",
            press: "中华书局",
            name: "活着"
        }

        /* JSON  */
        // {
        //     "author": "余华",
        //     "price": "23.90",
        //     "press": "中华书局",
        //     "name": "活着"
        // }

        /* 2、JSON数据和JavaScript语法有什么区别？ */
        /* (1) JSON数据本质上是有格式的字符串。 */
        /* (2) JSON数据中没有函数，也没有undefined */
        /* (3) 标准的JSON数据key应该要使用双引号。  */

        /* 3、掌握如何处理JSON数据 */
        /* (1) 序列化   JSON.stringify()     JavaScript对象|数组->json字符串 */
        /* (2) 反序列化 JSON.parse()                                       */


        /* 001-对象的处理 */
        /* 注意点：
         (1)在转换的时候如果对象中存在value值为undefined的键值对或者是函数那么这个数据会丢失
         (2)如果是正则表达式，那么转换之后正则总是被变成一个空对象
        */
        // let o1 = {
        //     name: "zs",
        //     age: 18,
        //     address: "东莞",
        //     id: 100,
        //     // showInfo() {
        //     //     console.log("+++")
        //     // },
        //     // color: undefined,
        //     // info: null,
        //     // reg: /[abcb]\s/
        // };

        /* 语法：JSON.stringify(obj|arr,fn|arr,flag) */
        /* flag:用来格式化JSON字符串(美化)，如果传递的是数字，那么表示以N个空格来处理，最大为10，可以传递字符串 */

        /* 基本用法 */
        // let json1 = JSON.stringify(o1);
        // console.log(o1);
        // console.log(typeof json1, json1);

        /* 高级用法 */
        // let json2 = JSON.stringify(o1, null, 4);  /* 格式化处理：加4个空格 */
        // let json2 = JSON.stringify(o1, null, 10);
        // let json2 = JSON.stringify(o1, null, "####");
        // console.log(json2);

        // let json3 = JSON.stringify(o1, ["name","age"]); /* 仅仅处理name和age这两个字段 */
        // console.log(json3);

        // let json4 = JSON.stringify(o1, (key, value) => {
        //     if (key === "address" || key === "name") { /* 过滤：如果返回undefined表示忽略该键值对 */
        //         return undefined;
        //     } else if (key === "id") { /* 中间处理： */
        //         return value * 10;
        //     } else {
        //         return value;
        //     }
        // });
        // console.log(json4);

        /* 002-数组的处理 */
        // let arr = [{
        //     id: 1,
        //     name: "zs",
        //     age: 4
        // }, {
        //     id: 2,
        //     name: "lw",
        //     age: 5
        // }, {
        //     id: 3,
        //     name: "sr",
        //     age: 4
        // }];

        // let json5 = JSON.stringify(arr, ["name", "id"], 4);
        // console.log(json5);


        /* 语法 JSON.parse(json,fn) */
        let jsonA = `{"name":"zs","color":"red"}`;
        // let obj1 = JSON.parse(jsonA);
        // console.log(obj1)

        let obj2 = JSON.parse(jsonA, (key, value) => {
            if (key === "color") {
                return undefined;
            } else {
                console.log("value", value);
                return value;
            }
        });
        console.log(obj2)
    </script>
</body>

</html>