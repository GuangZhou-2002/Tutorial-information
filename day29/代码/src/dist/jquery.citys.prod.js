"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(n){"function"==typeof define&&(define.amd||define.cmd)&&"undefined"==typeof jQuery?define(["jquery"],function(){return n(jQuery),jQuery}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=function(e,o){return void 0===o&&(o="undefined"!=typeof window?require("jquery"):require("jquery")(e)),n(o),o}:n(jQuery)}(function(l){l.support.cors=!0,l.fn.citys=function(e,f){"function"==typeof e?(f=e,e={}):(e=e||{},f=f||function(){});var s=l.extend({},{dataUrl:"https://passer-by.com/data_location/list.json",crossDomain:!0,dataType:"json",provinceField:"province",cityField:"city",areaField:"area",valueType:"code",code:0,province:0,city:0,area:0,required:!0,nodata:"hidden",onChange:function(){}},e);return this.each(function(){var d={},e=l(this),p=e.find('select[name="'+s.provinceField+'"]'),y=e.find('select[name="'+s.cityField+'"]'),u=e.find('select[name="'+s.areaField+'"]');l.ajax({url:s.dataUrl,type:"GET",crossDomain:s.crossDomain,dataType:s.dataType,jsonpCallback:"jsonp_location",success:function(i){var a,t,c,r,e;s.code&&(e=s.code-s.code%1e4,i[e]&&(s.province=e),e=s.code-(s.code%1e4?s.code%100:s.code),i[e]&&(s.city=e),e=s.code%100?s.code:0,i[e]&&(s.area=e));function o(){for(var e in a={},t={},r=!(c={}),i){var o,n;e%1e4?(o=e-s.province,s.province&&0<o&&o<1e4&&(e%100?8e3<o?(t[e]=i[e],(s.required&&!s.city||isNaN(s.city)&&-1<i[e].indexOf(s.city))&&(s.city=e)):r?(n=e-s.city,s.city&&0<n&&n<100&&(c[e]=i[e],(s.required&&!s.area||isNaN(s.area)&&-1<i[e].indexOf(s.area))&&(s.area=e))):(c[e]=i[e],(s.required&&!s.area||isNaN(s.area)&&-1<i[e].indexOf(s.area))&&(s.area=e)):(r=!0,t[e]=i[e],(s.required&&!s.city||isNaN(s.city)&&-1<i[e].indexOf(s.city))&&(s.city=e)))):(a[e]=i[e],s.required&&!s.province?!s.city||s.city%1e4?s.province=e:s.province=s.city:isNaN(s.province)&&-1<i[e].indexOf(s.province)&&(s.province=e))}}var n={province:function(){for(var e in p.empty(),s.required||p.append('<option value=""> - 请选择 - </option>'),a)p.append('<option value="'+("code"==s.valueType?e:a[e])+'" data-code="'+e+'">'+a[e]+"</option>");var o;s.province&&(o="code"==s.valueType?s.province:a[s.province],p.val(o)),this.city()},city:function(){if(y.empty(),r){for(var e in y.css("display",""),s.required||y.append('<option value=""> - 请选择 - </option>'),"disabled"==s.nodata?y.prop("disabled",l.isEmptyObject(t)):"hidden"==s.nodata&&y.css("display",l.isEmptyObject(t)?"none":""),t)y.append('<option value="'+("code"==s.valueType?e:t[e])+'" data-code="'+e+'">'+t[e]+"</option>");var o;s.city?(o="code"==s.valueType?s.city:t[s.city],y.val(o)):s.area&&(o="code"==s.valueType?s.area:t[s.area],y.val(o))}else y.css("display","none");this.area()},area:function(){for(var e in u.empty(),s.required||u.append('<option value=""> - 请选择 - </option>'),"disabled"==s.nodata?u.prop("disabled",l.isEmptyObject(c)):"hidden"==s.nodata&&u.css("display",l.isEmptyObject(c)?"none":""),c)u.append('<option value="'+("code"==s.valueType?e:c[e])+'" data-code="'+e+'">'+c[e]+"</option>");var o;s.area&&(o="code"==s.valueType?s.area:c[s.area],u.val(o))}};d.getInfo=function(){return{direct:!r,province:i[s.province]||"",city:i[s.city]||"",area:i[s.area]||"",code:s.area||s.city||s.province}},p.on("change",function(){s.province=l(this).find("option:selected").data("code")||0,s.city=0,s.area=0,o(),n.city(),s.onChange(d.getInfo())}),y.on("change",function(){s.city=l(this).find("option:selected").data("code")||0,s.area=0,o(),n.area(),s.onChange(d.getInfo())}),u.on("change",function(){s.area=l(this).find("option:selected").data("code")||0,s.onChange(d.getInfo())}),o(),n.province(),s.code&&s.onChange(d.getInfo()),f(d)}})})}});